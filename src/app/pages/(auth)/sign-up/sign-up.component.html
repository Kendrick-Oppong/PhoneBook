<form
  autocomplete="off"
  [formGroup]="signUpForm"
  novalidate
  (ngSubmit)="onSubmit()"
  class="lg:grid lg:grid-cols-[35rem_1fr] 2xl:grid-cols-[40rem_1fr] min-h-dvh"
>
  <div
    class="self-center max-w-xl p-5 mx-auto mt-5 space-y-4 lg:max-w-full lg:mx-0"
  >
    <h1 class="text-3xl font-bold text-center text-primary">
      Create an account
    </h1>
    <div>
      <label for="username">Username</label>
      <input
        type="text"
        id="username"
        formControlName="username"
        [ngClass]="{ 'border border-destructive': isFieldError('username') }"
        name="username"
        placeholder="Choose a unique username"
      />
      <small *ngIf="isFieldError('username')" class="text-destructive">
        {{ getErrorMessage("username") }}
      </small>
    </div>
    <div>
      <label for="email">Email</label>
      <input
        type="text"
        id="email"
        formControlName="email"
        [ngClass]="{ 'border border-destructive': isFieldError('email') }"
        name="email"
        placeholder="Enter your email address"
      />
      <small *ngIf="isFieldError('email')" class="text-destructive">
        {{ getErrorMessage("email") }}
      </small>
    </div>
    <div>
      <label for="password">Password</label>
      <input
        type="password"
        id="password"
        formControlName="password"
        [ngClass]="{ 'border border-destructive': isFieldError('password') }"
        name="password"
        placeholder="Choose a unique password (min 6 characters)"
      />
      <small *ngIf="isFieldError('password')" class="text-destructive">
        {{ getErrorMessage("password") }}
      </small>
    </div>
    <div>
      <label for="confirm_password">Confirm Password</label>
      <input
        type="password"
        id="confirm_password"
        name="confirm_password"
        formControlName="confirm_password"
        [ngClass]="{
          'border border-destructive':
            isFieldError('confirm_password') || signUpForm.hasError('mismatch')
        }"
        placeholder="Confirm your password"
      />
      <small
        *ngIf="
          isFieldError('confirm_password') && !signUpForm.hasError('mismatch')
        "
        class="text-destructive"
      >
        {{ getErrorMessage("confirm_password") }}
      </small>
      <small *ngIf="signUpForm.hasError('mismatch')" class="text-destructive">
        {{ getErrorMessage("confirm_password") }}
      </small>
    </div>

    <app-oauth />

    <div class="!mt-10">
      <button
        type="submit"
        class="flex items-center justify-center gap-2 text-white bg-primary hover:bg-primary/80 disabled:opacity-50"
        [disabled]="isLoading"
      >
        <ng-container *ngIf="isLoading; else signUpText">
          Signing Up
          <img
            class="text-white invert animate-spin"
            src="loader.svg"
            alt="Loading..."
          />
        </ng-container>
        <ng-template #signUpText>Sign Up</ng-template>
      </button>
      <p class="my-3 text-base text-center">
        Already have an account?
        <span class="font-medium underline text-primary">
          <a routerLink="/sign-in" ariaCurrentWhenActive="page">Sign in</a>
        </span>
      </p>
    </div>
  </div>
  <div class="relative flex-col justify-center hidden gap-10 lg:flex bg-linear">
    <div class="flex items-center justify-center gap-10">
      <div class="p-1">
        <img
          ngSrc="add-friend.png"
          alt=""
          width="80"
          class="p-2 bg-white rounded-full"
          height="80"
        />
      </div>
      <div class="">
        <img
          ngSrc="add.png"
          alt=""
          width="120"
          height="120"
          class="p-2 bg-white rounded-full"
        />
      </div>
      <div class="">
        <img
          ngSrc="form.png"
          alt=""
          width="80"
          height="80"
          class="p-2 bg-white rounded-full"
        />
      </div>
    </div>

    <div class="p-5 space-y-4 text-center text-white">
      <h1 class="text-2xl font-bold">
        Keep all your contacts organized in one place.
      </h1>
      <p class="mt-4">
        Easily add, update, and manage your contacts, including phone numbers,
        addresses, and social links.
      </p>
      <p class="mt-4">
        Stay connected and never lose important contact information again.
      </p>
    </div>
  </div>
</form>
